# Qiita記事をAtomで管理する

## 背景

以前から Markdown のドキュメントは Atom Editor で管理しているのですが、ドキュメント共有時にいろいろなサービスのものを使っていたりして、不便だなと感じていたので、 Atom で完結するようなパッケージを作成してみました。

作成したパッケージはこちらです。

https://atom.io/packages/sync-sync


## 機能 / 使い方

今のところ、以下のような機能を提供しています。

- Import 機能
   - 各サービスの記事一蘭をローカルに取り込みます
      - Qiita はユーザ名指定 (Qiita::Team は未対応というか、未検証)
      - esa.io はチーム名指定
      - DocBase はドメイン指定
   - 取り込んだ記事はローカルのディレクトリ指定で最新状態に更新できます
   - 各ファイルを指定することで、ファイル指定で最新状態に更新できます
      - Import の際にローカル側で未反映の変更がある場合は、そのファイルは Import をスキップします
- Export 機能
   - ローカルで作成したファイルを個別指定で、各サービスに記事として投稿できます
      - Title も指定できますが、空にしておくとファイル名を自動で使います
   - 既に取り込んだ or 投稿したファイルを個別指定で、ローカルの変更で記事を更新できます

注意点としては、

- 各 API の rate limit があるので、記事数が多かったりすると引っかかるかもしれません
- リモート側の変更はチェックしてないので、他人が更新可能な場合には、その変更を上書きする恐れがあるため、そのようなケースでは Import してから Export してください
- **これ大事ですが、 public な情報と private な情報は、別プロジェクトで管理して下さい。便利な分、間違って投稿する恐れがあります...**

利用時には、各サービス API のアクセストークンを指定する必要があります。
アクセストークンの取得方法は以下のとおりです。

- Qiita
   - https://qiita.com/settings/applications から個人用アクセストークンを発行
- esa.io
   - https://{team}.esa.io/user/applications から個人用アクセストークンを発行
- DocBase
   - https://{domain}.docbase.io/settings/profile から API Token を発行


## 設計

設計時に注意した点として、以下があります。

- 各サービスごとに結構特徴があるのですが、それらは設定ファイルにメタ情報として保存、更新系 API の場合は画面上から入力可能にすることで、差異の吸収を図りました
   - Qiita の場合は、シンプルでフラットな構造なので、そのまま単階層に Import するようにしました
   - esa.io は、 category が事実上ディレクトリのような扱いなので、ローカルでも Import 時はその構成を再現するようにしました
   - DocBase の場合は、 group と scope というのがあり、これらはメタ情報として制御可能にしました
   - 各サービスとも tag はメタ情報として制御可能にしました
   - 各サービスとも WIP 状態は未実装です
- ポータブルにするため、設定ファイルは `~/.atom` ではなく、 Atom でプロジェクトとして開いたディレクトリルートに作るようにしています
   - これによって例えば git 保存して持ち運びできるようになります。
   - アクセストークンについては、パッケージの設定で非保存可能にしています (本当は別ファイル保存にして gitignore に入れるのがいいんですが、まだ実装していません)
- ファイルと各サービスとのヒモ付は 1:m 対応が可能なようにしました (同一ファイルを Qiita や esa.io など複数サービスに投稿可能です)


## 最後にお願い

ソースコードは MIT で公開しています。

https://github.com/tearoom6/sync-sync

割と突貫工事で作ったのと JS の async に慣れてないのとで荒削りのコードですが、まだまだ改善できることは多いので、ぜひフィードバック頂けるとモチベーションになります！
他のサービスとの連携とかでも嬉しいです！
(Confluence や Evernote との連携もやりたいんですが、それらは本体が HTML なので、 Markdown への自動変換とかうまくいくんだろうかという)

- [Issue](https://github.com/tearoom6/sync-sync/issues)
- 可能なら [Pull Request](https://github.com/tearoom6/sync-sync/pulls)
